The behaviour has been adapted from the [node-sqlite](https://github.com/kriasoft/node-sqlite/blob/6c0dc7f40f4342680df8cc381d4040bfd64410d4/src/utils/migrate.ts) migration algorithm